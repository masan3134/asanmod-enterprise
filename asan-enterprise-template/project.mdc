<!--
ASANMOD v2.0 - PROJECT CONTEXT
ID: CONST-005
STATUS: TEMPLATE
TYPE: RULES
LAST_UPDATED: [WIZARD_WILL_FILL]
VERSION: v2.1.0-alpha
-->

# [PROJECT_NAME] - ASANMOD PROJECT CONTEXT

## ğŸ“Œ PROJECT IDENTITY

- **App:** [PROJECT_NAME] ([PROJECT_DESCRIPTION])
- **Stack:** Next.js 15 (App Router), tRPC, Drizzle ORM, PostgreSQL, TailwindCSS
- **Governance:** ASANMOD v2.0

## ğŸš€ QUICK START

**Single Reference:** `docs/AGENT_QUICK_REF.md`

### Quick Commands

```bash
npm run verify      # Quality check (0/0/0)
npm run fix         # Auto-fix lint
npm run status      # System dashboard
npm run dev         # Start development
npm run deploy-prod # Production deploy
```

---

## ğŸ›¡ï¸ IRON CURTAIN ISOLATION

> **SOURCE OF TRUTH:** `docs/asanmod-core.json`

| Service | DEV | PROD |
|---------|-----|------|
| Frontend | 3000 | 3002 |
| Backend | 3001 | 3003 |

**PROD Binding:** `127.0.0.1` (MANDATORY - No external access)

**Verification:**
- **Dev Check:** `curl -I http://localhost:3000`
- **Prod Check:** `curl -I http://localhost:3002`

---

## ğŸ§© CODING PATTERNS (STRICT)

### 1. Next.js App Router
- **Client Components:** `'use client'` at top.
- **Server Components:** Default (no directive).

### 2. TypeScript Safety
- **No `any`:** Prohibited. Use proper types or `unknown`.
- **Async/Await:** Always handle with `try/catch`.

### 3. tRPC Patterns
- **Routers:** `src/server/routers/`
- **Validation:** Zod schemas required for all inputs
- **Naming:** Singular endpoints (`/customer` not `/customers`)

### 4. ASANMOD Protocols
- **Verify:** `npm run verify` before commit
- **Fix:** `npm run fix` for auto-linting
- **State:** Track progress in `.asanmod/state/`

---

## ğŸ“ FILE STRUCTURE

```
src/
â”œâ”€â”€ app/          â†’ Pages (Next.js App Router)
â”œâ”€â”€ components/   â†’ UI Components
â”œâ”€â”€ server/       â†’ tRPC routers
â”‚   â””â”€â”€ routers/  â†’ Module routers
â”œâ”€â”€ db/           â†’ Drizzle schema
â”‚   â””â”€â”€ schema/   â†’ Table definitions
â””â”€â”€ lib/          â†’ Utility functions
```

---

## ğŸŸ¢ AGENT INITIALIZATION

1. `read_file("docs/AGENT_QUICK_REF.md")`
2. `read_file("docs/asanmod-core.json")`
3. Check `.asanmod/installed.lock` exists
4. Report: "**ASANMOD v2.0 ONLINE. Project: [PROJECT_NAME]**"

---

## ğŸ“‹ PROJECT MODULES

[WIZARD_WILL_FILL: List of enabled modules]

## ğŸ” CREDENTIALS

See `CREDENTIALS.md` for test accounts.

---

## ğŸ›¡ï¸ AGENT DISCIPLINE (Hard Constraints)

### ZERO-TRUST VERIFICATION
**Never trust previous step output.** Always verify file existence with `ls` or `cat`.

**Example**:
```bash
# âŒ Bad: Assume file exists
cat manifest.json

# âœ… Good: Verify first
if [ -f "manifest.json" ]; then cat manifest.json; fi
```

### CONTEXT PRESERVATION
Every significant change MUST be logged in `CHANGELOG.md` using standard commit format:
- `feat(scope): description`
- `fix(scope): description`
- `docs(scope): description`

### GHOST-DEV RULE
If a command fails **3 consecutive times**, stop and request "Host Hardware Intervention".

**Rationale**: After 3 failures, the issue is likely environmental (Postgres binary missing, port occupied, etc.), not fixable by agent alone.

### MANIFEST-FIRST STARTUP
On project start, **always read `.asanmod/manifest.json`** as the very first action to understand system state.

**Query examples**:
```bash
# Check if wizard was completed
cat .asanmod/manifest.json | jq '.flags.wizard_completed'

# Check verification status
cat .asanmod/manifest.json | jq '.verification.gates_passed'

# Check health
cat .asanmod/manifest.json | jq '.health'
```

---

*ASANMOD v2.1.0-alpha - Agent Discipline Enabled*
