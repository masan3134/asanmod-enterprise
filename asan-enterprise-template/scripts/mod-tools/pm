#!/bin/bash
# PM2 Wrapper - Simplified PM2 commands
# Usage: ./scripts/mod-tools/pm [dev|prod] [command]

ENV=$1
CMD=$2

if [ -z "$ENV" ] || [ -z "$CMD" ]; then
  echo "Usage: ./scripts/mod-tools/pm [dev|prod] [status|start|stop|restart|logs]"
  exit 1
fi

APP_NAME="app-$ENV"

case $CMD in
  status)
    pm2 status $APP_NAME
    ;;
  start)
    pm2 start ecosystem.config.cjs --only $APP_NAME
    ;;
  stop)
    pm2 stop $APP_NAME
    ;;
  restart)
    pm2 restart $APP_NAME
    ;;
  logs)
    pm2 logs $APP_NAME
    ;;
  *)
    echo "Unknown command: $CMD"
    echo "Available: status, start, stop, restart, logs"
    exit 1
    ;;
esac
